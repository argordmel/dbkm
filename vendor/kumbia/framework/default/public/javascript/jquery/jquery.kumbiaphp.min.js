(function(t){t.Kumbia={publicPath:null,plugin:[],cConfirm:function(i){let e=t(this);confirm(e.data("msg"))||i.preventDefault()},cFx:function(i){return function(e){e.preventDefault();let a=t(this),n=t("#"+a.data("to"));n[i]()}},cRemote:function(i){let e=t(this),a=t("#"+e.data("to"));i.preventDefault(),a.hide(),a.load(this.href),a.show("fast")},cRemoteConfirm:function(i){let e=t(this),a=t("#"+e.data("to"));i.preventDefault(),confirm(e.data("msg"))&&(a.hide(),a.load(this.href),a.show("fast"))},cFRemote:function(i){i.preventDefault();let e=t(this),a=t("[type=submit]",e);a.attr("disabled","disabled");let n=e.attr("action"),c=e.attr("data-to");t.post(n,e.serialize(),function(i,e){let n=t("#"+c);n.hide(),n.html(i),n.show("fast"),a.attr("disabled",null)})},cUpdaterSelect:function(i){let e=t(this),a=t("#"+e.data("update")),n=e.data("url");a.empty(),t.get(n,{id:e.val()},function(i){for(let e in i){let n=t("<option />").text(i[e]).val(e);a.append(n)}},"json")},bind:function(){t("body").on("click","a.js-confirm, input.js-confirm",this.cConfirm),t("body").on("click","a.js-remote",this.cRemote),t("body").on("click","a.js-remote-confirm",this.cRemoteConfirm),t("body").on("click",".js-show",this.cFx("show")),t("body").on("click",".js-hide",this.cFx("hide")),t("body").on("click",".js-toggle",this.cFx("toggle")),t("body").on("click",".js-fade-in",this.cFx("fadeIn")),t("body").on("click",".js-fade-out",this.cFx("fadeOut")),t("body").on("submit","form.js-remote",this.cFRemote),t("body").on("change","select.js-remote",this.cUpdaterSelect),t.Kumbia.bindDatePicker()},autoload:function(){let i=t("[class*='jp-']");t.each(i,function(i){let e=t(this),a=e.attr("class").split(" ");for(i in a)if("jp-"==a[i].substr(0,3)){if(-1!=t.inArray(a[i].substr(3),t.Kumbia.plugin))continue;t.Kumbia.plugin.push(a[i].substr(3))}});let e=t("head");for(let i in t.Kumbia.plugin)t.ajaxSetup({cache:!0}),e.append('<link href="'+t.Kumbia.publicPath+"css/"+t.Kumbia.plugin[i]+'.css" type="text/css" rel="stylesheet"/>'),t.getScript(t.Kumbia.publicPath+"javascript/jquery/jquery."+t.Kumbia.plugin[i]+".js",function(t,i){})},bindDatePicker:function(){let i=t("input.js-datepicker"),e=function(){i.each(function(){let i={monthSelector:!0,yearSelector:!0},e=t(this);null!=e.attr("min")&&(i.dateMin=e.attr("min").split("-")),null!=e.attr("max")&&(i.dateMax=e.attr("max").split("-")),e.pickadate(i)})};if(null!=typeof t.pickadate)return e();t("head").append('<link href="'+this.publicPath+'css/pickadate.css" rel="stylesheet">'),jQuery.ajax({dataType:"script",cache:!0,url:this.publicPath+"javascript/jquery/pickadate.js"}).done(function(){e()})},initialize:function(){let i=document.currentScript.src;this.publicPath=i.slice(0,i.lastIndexOf("javascript/")),t(function(){t.Kumbia.bind(),t.Kumbia.autoload()})}},t.Kumbia.initialize()})(jQuery);